<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b0c10" />
  <title>Downforce Mafia ‚Äî Micro-SaaS for iRacing Teams</title>
  <style>
    :root{
      --bg:#0b0c10;
      --bg2:#0f1118;
      --panel:#131622;
      --txt:#e8ebf3;
      --muted:#a6adbf;
      --line:#242a3a;
      --red:#e10600;
      --red2:#ff2a22;
      --good:#23c483;
      --warn:#ffcc00;
      --bad:#ff4d4d;
      --shadow: 0 18px 50px rgba(0,0,0,.55);
      --shadow2: 0 10px 30px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 12px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --focus: 0 0 0 3px rgba(225,6,0,.35), 0 0 0 1px rgba(255,255,255,.05) inset;
      --max: 1160px;
      --navH: 72px;
    }
    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: var(--sans);
      background:
        radial-gradient(1200px 800px at 15% -10%, rgba(225,6,0,.20), transparent 55%),
        radial-gradient(900px 700px at 95% 10%, rgba(255,42,34,.10), transparent 55%),
        radial-gradient(800px 600px at 60% 110%, rgba(120,130,160,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), #07080c 65%, #05060a);
      color:var(--txt);
      line-height:1.45;
      overflow-x:hidden;
    }
    a{ color:inherit; text-decoration:none; }
    button, input, select, textarea{ font:inherit; color:inherit; background:transparent; }
    ::selection{ background: rgba(225,6,0,.35); }
    :focus-visible{ outline:none; box-shadow: var(--focus); border-radius: 10px; }

    /* scanline */
    .scanline{
      position:fixed; inset:0; pointer-events:none;
      background: repeating-linear-gradient(180deg, rgba(255,255,255,.03) 0, rgba(255,255,255,.03) 1px, transparent 1px, transparent 3px);
      opacity:.06; mix-blend-mode: overlay; z-index:1;
    }

    /* layout */
    main{ position:relative; z-index:2; }
    section{ scroll-margin-top: calc(var(--navH) + 16px); padding: 72px 16px; }
    .container{ max-width: var(--max); margin:0 auto; }

    /* NAV */
    header.navbar{
      position:fixed; top:0; left:0; right:0;
      height:var(--navH);
      z-index: 1000;
      backdrop-filter: blur(10px);
      background: rgba(10,11,16,.72);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav-wrap{
      max-width: var(--max);
      margin:0 auto;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 16px;
      gap: 12px;
    }
    .brand{
      display:flex; align-items:center; gap: 12px;
      min-width: 240px;
    }
    .logo{
      width: 44px; height:44px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(225,6,0,.95), rgba(255,42,34,.55));
      box-shadow: 0 10px 24px rgba(225,6,0,.18);
      display:grid; place-items:center;
      border: 1px solid rgba(255,255,255,.10);
    }
    .logo svg{ width: 30px; height: 30px; opacity:.95; }
    .brand-title{ display:flex; flex-direction:column; gap:2px; line-height:1.1; }
    .brand-title strong{
      letter-spacing:.08em;
      font-size: 12px;
      color: #fff;
      text-transform:uppercase;
    }
    .brand-title span{ font-family: var(--mono); font-size: 11px; color: var(--muted); }

    nav.primary{ flex:1 1 auto; display:flex; justify-content:center; }
    .nav-links{
      display:flex; gap: 10px; align-items:center;
      overflow:auto; scrollbar-width:none;
    }
    .nav-links::-webkit-scrollbar{ display:none; }
    .nav-links a{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 10px;
      border-radius: 12px;
      color: var(--muted);
      border: 1px solid transparent;
      transition: transform .15s ease, background .15s ease, color .15s ease, border-color .15s ease;
      font-size: 13px;
      white-space:nowrap;
    }
    .nav-links a:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.04);
      border-color: rgba(255,255,255,.06);
      color: var(--txt);
    }
    .nav-links a.active{
      color:#fff;
      background: linear-gradient(135deg, rgba(225,6,0,.22), rgba(255,255,255,.03));
      border-color: rgba(225,6,0,.35);
    }
    .nav-actions{ display:flex; align-items:center; gap: 10px; min-width: 290px; justify-content:flex-end; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 12px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size: 12px; line-height:1;
    }
    .chip b{ color:#fff; font-weight:700; letter-spacing:.06em; }

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding: 11px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      font-weight: 650;
      letter-spacing:.02em;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.16); }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      border-color: rgba(225,6,0,.40);
      background: linear-gradient(135deg, rgba(225,6,0,.92), rgba(255,42,34,.45));
      box-shadow: 0 14px 28px rgba(225,6,0,.18);
    }
    .btn.primary:hover{ border-color: rgba(255,255,255,.16); box-shadow: 0 18px 36px rgba(225,6,0,.22); }
    .btn.ghost{ background: transparent; border-color: rgba(255,255,255,.12); }
    .btn.small{ padding: 9px 12px; border-radius: 12px; font-size: 13px; }
    .btn.tiny{ padding: 8px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; }
    .btn.danger{ border-color: rgba(255,77,77,.35); background: rgba(255,77,77,.10); }

    .hamburger{
      display:none;
      width:44px; height:44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      cursor:pointer; place-items:center;
    }
    .hamburger span{
      display:block; width:18px; height:2px;
      background:#fff; border-radius:999px;
      position:relative;
    }
    .hamburger span::before, .hamburger span::after{
      content:""; position:absolute; left:0;
      width:18px; height:2px; background:#fff; border-radius:999px;
    }
    .hamburger span::before{ top:-6px; opacity:.85; }
    .hamburger span::after{ top:6px; opacity:.85; }

    /* HERO */
    .hero{
      padding-top: calc(var(--navH) + 18px);
      padding-bottom: 46px;
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-80px -120px -80px -120px;
      background:
        radial-gradient(900px 500px at 25% 10%, rgba(225,6,0,.35), transparent 65%),
        radial-gradient(900px 500px at 80% 20%, rgba(255,42,34,.12), transparent 70%),
        linear-gradient(120deg, rgba(255,255,255,.06), transparent 35%),
        repeating-linear-gradient(120deg, rgba(255,255,255,.06) 0, rgba(255,255,255,.06) 2px, transparent 2px, transparent 12px),
        repeating-linear-gradient(200deg, rgba(225,6,0,.18) 0, rgba(225,6,0,.18) 1px, transparent 1px, transparent 10px),
        linear-gradient(180deg, rgba(0,0,0,.1), rgba(0,0,0,.65));
      transform: skewY(-3deg);
      opacity:.9;
      filter: saturate(1.05);
    }
    .hero .container{ position:relative; z-index:2; }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 16px;
      align-items:stretch;
    }
    .hero-card{
      padding: 22px;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,11,16,.40);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero-card::after{
      content:"";
      position:absolute; inset:-2px;
      border-radius: 24px;
      border: 1px solid rgba(225,6,0,.25);
      pointer-events:none;
      mask: linear-gradient(180deg, rgba(0,0,0,.85), transparent 60%);
      opacity:.7;
    }
    .kicker{
      display:flex; align-items:center; gap:10px;
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.12em;
      text-transform: uppercase;
    }
    .dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: rgba(225,6,0,.95);
      box-shadow: 0 0 0 6px rgba(225,6,0,.15);
    }
    .hero h1{
      margin: 10px 0 8px 0;
      font-size: 40px;
      line-height:1.05;
      letter-spacing: .01em;
    }
    .hero h1 .accent{ color: var(--red2); }
    .hero .sub{
      margin:0 0 16px 0;
      color: rgba(184,192,212,.95);
      font-size: 14px;
      max-width: 72ch;
    }
    .tagline{ display:flex; flex-wrap:wrap; gap: 10px; margin-top: 10px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size: 12px;
    }
    .pill i{
      width: 8px; height: 8px; border-radius: 999px;
      background: rgba(255,255,255,.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
    }
    .pill .r{ background: rgba(225,6,0,.85); box-shadow: 0 0 0 6px rgba(225,6,0,.12); }

    .hero .cta-row{ display:flex; gap: 12px; flex-wrap: wrap; align-items:center; margin-top: 12px; }
    .mini{
      padding: 16px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,11,16,.40);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow2);
    }
    .mini h3{ margin:0 0 8px 0; font-size: 15px; }
    .mini p{ margin:0; color: var(--muted); font-size: 13px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-size: 12px;
      color: var(--muted);
    }
    .badge.good{ border-color: rgba(35,196,131,.28); background: rgba(35,196,131,.10); color: #c7ffe9;}
    .badge.warn{ border-color: rgba(255,204,0,.24); background: rgba(255,204,0,.10); color: #fff0b3;}
    .badge.red{ border-color: rgba(225,6,0,.30); background: rgba(225,6,0,.12); color: #ffd1d1;}

    /* blocks */
    .section-head{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap: 14px; margin-bottom: 18px;
    }
    .section-head h2{ margin:0; font-size: 22px; letter-spacing:.02em; }
    .section-head p{ margin:0; color: var(--muted); max-width: 70ch; font-size: 13px; }
    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.035), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .panel .inner{ padding: 16px; }

    .grid{ display:grid; gap: 14px; }
    .grid.cols-2{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .grid.cols-3{ grid-template-columns: repeat(3, minmax(0, 1fr)); }

    /* feature cards */
    .card{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      padding: 14px;
    }
    .card b{ display:block; font-size: 14px; }
    .card p{ margin: 8px 0 0 0; color: var(--muted); font-size: 13px; }

    /* pricing */
    .price-grid{ display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
    .price{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      padding: 16px;
      display:flex; flex-direction:column; gap: 10px;
      position:relative;
      overflow:hidden;
    }
    .price.featured{
      border-color: rgba(225,6,0,.35);
      background: linear-gradient(135deg, rgba(225,6,0,.12), rgba(255,255,255,.03));
      box-shadow: 0 18px 40px rgba(225,6,0,.10);
    }
    .price .tier{ font-weight:900; letter-spacing:.08em; text-transform:uppercase; font-size:12px; color:#fff; }
    .price .money{ font-family: var(--mono); font-size: 28px; font-weight: 900; }
    .price ul{ margin:0; padding-left: 18px; color: var(--muted); font-size: 13px; }
    .price li{ margin: 6px 0; }
    .price .tag{
      position:absolute; top: 14px; right: 14px;
      padding: 6px 10px; border-radius: 999px;
      border: 1px solid rgba(225,6,0,.30);
      background: rgba(225,6,0,.14);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing:.06em;
    }

    /* forms */
    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{ color: var(--muted); font-size: 12px; letter-spacing:.02em; }
    .input, select, textarea{
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      border-radius: 14px;
      padding: 11px 12px;
      outline:none;
      transition: border-color .15s ease, background .15s ease;
    }
    .input:hover, select:hover, textarea:hover{ border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.04); }
    textarea{ min-height: 110px; resize: vertical; }

    /* toast */
    .toast{
      position:fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 20px;
      z-index: 2100;
      min-width: min(560px, calc(100% - 24px));
      display:none;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(15,17,24,.92);
      box-shadow: var(--shadow2);
      color: #fff;
    }
    .toast.show{ display:block; }
    .toast small{ color: var(--muted); display:block; margin-top: 4px; }

    /* modal */
    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.66);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 2000;
      padding: 18px;
    }
    .modal.open{ display:flex; }
    .modal-card{
      width: min(560px, 100%);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(15,17,24,.92);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modal-head{
      display:flex; justify-content:space-between; align-items:center;
      padding: 14px 14px 10px 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .modal-head b{ font-size: 14px; letter-spacing:.06em; text-transform:uppercase; color:#fff; }
    .close-x{
      width:44px; height:44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      cursor:pointer;
    }
    .modal-body{ padding: 14px; display:grid; gap: 12px; }
    .help{ color: var(--muted); font-size: 12px; margin-top: 6px; }

    /* ADMIN */
    .route{ display:none; }
    .route.active{ display:block; }
    .admin-shell{ padding-top: calc(var(--navH) + 18px); padding-bottom: 26px; }
    .admin-top{
      display:flex; justify-content:space-between; align-items:flex-start;
      gap: 14px; flex-wrap:wrap;
      margin: 18px 0;
    }
    .admin-top h1{
      margin:0; font-size: 22px; letter-spacing:.02em;
    }
    .admin-top p{ margin:6px 0 0 0; color: var(--muted); font-size: 13px; }
    .tabs{
      display:flex; gap: 10px; flex-wrap:wrap;
      margin: 12px 0 0 0;
    }
    .tab{
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      cursor:pointer;
      font-size: 13px;
    }
    .tab.active{
      color:#fff;
      border-color: rgba(225,6,0,.35);
      background: linear-gradient(135deg, rgba(225,6,0,.16), rgba(255,255,255,.03));
    }

    table{ width:100%; border-collapse: collapse; }
    th, td{
      text-align:left;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      vertical-align: top;
      font-size: 13px;
    }
    th{
      position:sticky; top:0;
      background: rgba(15,17,24,.92);
      backdrop-filter: blur(8px);
      z-index:2;
      color: rgba(184,192,212,.95);
      letter-spacing:.06em;
      text-transform: uppercase;
      font-size: 11px;
    }
    .table-wrap{ overflow:auto; border-radius: 16px; border:1px solid rgba(255,255,255,.08); }

    /* mobile */
    @media (max-width: 980px){
      .hero-grid{ grid-template-columns: 1fr; }
      .nav-actions{ min-width: auto; }
      .price-grid{ grid-template-columns: 1fr; }
      .grid.cols-2{ grid-template-columns: 1fr; }
      nav.primary{ display:none; }
      .hamburger{ display:grid; }
    }

    /* drawer */
    .drawer{
      position:fixed; inset:0; z-index: 1900;
      display:none;
      background: rgba(0,0,0,.62);
      padding: 18px;
    }
    .drawer.open{ display:block; }
    .drawer .card{
      background: rgba(15,17,24,.95);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      overflow:hidden;
      box-shadow: var(--shadow);
      max-width: 520px;
      margin: 0 auto;
    }
    .drawer .top{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .drawer .links{
      padding: 10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .drawer .links a{
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: var(--muted);
    }
    .drawer .links a:hover{ color:#fff; border-color: rgba(225,6,0,.22); }

    /* small helpers */
    .mono{ font-family: var(--mono); }
    .muted{ color: var(--muted); }
    .split{ display:flex; gap: 12px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
  </style>
</head>

<body>
  <div class="scanline" aria-hidden="true"></div>

  <!-- NAV -->
  <header class="navbar" role="banner">
    <div class="nav-wrap">
      <a class="brand" href="#home" aria-label="Go to Home">
        <div class="logo" aria-hidden="true" title="Downforce Mafia">
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M10 44V20h14c9 0 14 4 14 12s-5 12-14 12H10Z" stroke="white" stroke-width="4" opacity="0.92"/>
            <path d="M42 44V20h12" stroke="white" stroke-width="4" opacity="0.85"/>
            <path d="M42 32h10" stroke="white" stroke-width="4" opacity="0.85"/>
            <path d="M10 48h44" stroke="white" stroke-width="3" opacity="0.25"/>
          </svg>
        </div>
        <div class="brand-title">
          <strong>DOWNFORCE MAFIA</strong>
          <span>Micro-SaaS for iRacing Teams</span>
        </div>
      </a>

      <nav class="primary" aria-label="Primary">
        <div class="nav-links" id="navLinks">
          <a href="#home" data-target="home">Home</a>
          <a href="#features" data-target="features">Features</a>
          <a href="#pricing" data-target="pricing">Pricing</a>
          <a href="#faq" data-target="faq">FAQ</a>
          <a href="#contact" data-target="contact">Contact</a>
          <a href="#admin" data-target="admin" id="navAdmin" style="display:none;">Admin</a>
        </div>
      </nav>

      <div class="nav-actions">
        <span class="chip" title="Product focus"><b>TEAM</b> ‚Ä¢ admin-ready</span>
        <button class="btn small ghost" id="btnLogin">Admin Login</button>
        <button class="btn small danger" id="btnLogout" style="display:none;">Logout</button>
        <button class="hamburger" id="openDrawer" aria-label="Open menu"><span aria-hidden="true"></span></button>
      </div>
    </div>
  </header>

  <!-- Mobile Drawer -->
  <aside class="drawer" id="drawer" aria-hidden="true">
    <div class="card" role="dialog" aria-label="Mobile menu">
      <div class="top">
        <div style="display:flex;align-items:center;gap:10px;">
          <div class="logo" aria-hidden="true" style="width:40px;height:40px;border-radius:14px;">
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M10 44V20h14c9 0 14 4 14 12s-5 12-14 12H10Z" stroke="white" stroke-width="4" opacity="0.92"/>
              <path d="M42 44V20h12" stroke="white" stroke-width="4" opacity="0.85"/>
              <path d="M42 32h10" stroke="white" stroke-width="4" opacity="0.85"/>
              <path d="M10 48h44" stroke="white" stroke-width="3" opacity="0.25"/>
            </svg>
          </div>
          <div>
            <div style="font-weight:900;letter-spacing:.08em;font-size:12px;text-transform:uppercase;">DOWNFORCE MAFIA</div>
            <div style="color:var(--muted);font-size:12px;font-family:var(--mono);">Micro-SaaS for teams</div>
          </div>
        </div>
        <button class="close-x" id="closeDrawer" aria-label="Close">‚úï</button>
      </div>
      <div class="links" id="drawerLinks">
        <a href="#home">Home</a>
        <a href="#features">Features</a>
        <a href="#pricing">Pricing</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
        <a href="#admin" id="drawerAdmin" style="display:none;">Admin</a>
        <button class="btn primary" id="drawerLogin" style="display:inline-flex;justify-content:center;">Admin Login</button>
        <button class="btn danger" id="drawerLogout" style="display:none;justify-content:center;">Logout</button>
      </div>
    </div>
  </aside>

  <!-- TOAST -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- LOGIN MODAL -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-label="Admin login">
      <div class="modal-head">
        <b>Team Admin Login</b>
        <button class="close-x" id="closeLogin" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="badge red">Demo only: client-side session</div>

        <div class="grid cols-2">
          <div class="field">
            <label for="loginEmail">Email</label>
            <input class="input" id="loginEmail" type="email" placeholder="admin@team.com" autocomplete="username" required />
          </div>
          <div class="field">
            <label for="loginOrg">Team / Org</label>
            <input class="input" id="loginOrg" type="text" placeholder="Downforce Mafia" />
          </div>
        </div>

        <div class="field">
          <label for="loginPass">Password</label>
          <input class="input" id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required />
          <div class="help">Wire this to your backend (JWT/session). For now it accepts any non-empty values.</div>
        </div>

        <div class="split">
          <button class="btn primary" id="doLogin">Login ‚ûú</button>
          <button class="btn ghost" id="demoFill">Use demo credentials</button>
        </div>
        <div class="help">Tip: after login, open <span class="mono">#admin</span>.</div>
      </div>
    </div>
  </div>

  <!-- ROUTES -->
  <main>
    <!-- LANDING -->
    <div class="route active" id="routeLanding">
      <section id="home" class="hero">
        <div class="container hero-grid">
          <div class="hero-card">
            <div class="kicker"><span class="dot" aria-hidden="true"></span> Team Ops ‚Ä¢ Schedules ‚Ä¢ Results ‚Ä¢ Admin Tools</div>
            <h1>Run your iRacing team like a <span class="accent">real outfit</span>.</h1>
            <p class="sub">
              One place for your calendar, training blocks, results, roster, and briefings.
              Built for clean workflows: invite members, publish sessions, export .ics, track progress ‚Äî and keep everything consistent.
            </p>

            <div class="tagline" aria-label="Highlights">
              <span class="pill"><i class="r" aria-hidden="true"></i> Team calendar + .ics</span>
              <span class="pill"><i aria-hidden="true"></i> Roster & roles</span>
              <span class="pill"><i aria-hidden="true"></i> Results & KPIs</span>
              <span class="pill"><i aria-hidden="true"></i> Admin dashboard</span>
            </div>

            <div class="cta-row">
              <a class="btn primary" href="#pricing">Start free trial <span aria-hidden="true">‚ûú</span></a>
              <button class="btn ghost" id="btnOpenLogin">Admin Login <span aria-hidden="true">‚Üó</span></button>
              <a class="btn" href="#features">See features <span aria-hidden="true">‚ö°</span></a>
            </div>

            <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
              <span class="badge good">üõ°Ô∏è Clean ops</span>
              <span class="badge">üóìÔ∏è Schedules</span>
              <span class="badge red">‚õΩ Strategy notes</span>
              <span class="badge">üß© OBS overlays (optional)</span>
            </div>
          </div>

          <div style="display:flex;flex-direction:column;gap:14px;">
            <div class="mini">
              <h3>What you get</h3>
              <p>Admin panel to publish sessions, manage roster, and keep everyone aligned.</p>
              <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap;">
                <a class="btn tiny primary" href="#features">Features</a>
                <a class="btn tiny ghost" href="#pricing">Pricing</a>
              </div>
            </div>

            <div class="mini">
              <h3>Admin access</h3>
              <p>Login as team administrator to manage your micro-SaaS workspace.</p>
              <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap;">
                <button class="btn tiny primary" id="btnLogin2">Admin Login</button>
                <a class="btn tiny ghost" href="#admin">Go to dashboard</a>
              </div>
            </div>

            <div class="mini">
              <h3>Works with your stack</h3>
              <p>Hook into Discord webhooks, Google Sheets, or your own API. Keep it simple.</p>
              <div class="help">This template is ready to be wired to Stripe + auth.</div>
            </div>
          </div>
        </div>
      </section>

      <section id="features">
        <div class="container">
          <div class="section-head">
            <div>
              <h2>Features</h2>
              <p>Everything you need to run sessions and keep the team consistent ‚Äî without turning into spreadsheet hell.</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <span class="badge">‚öôÔ∏è Configurable</span>
              <span class="badge good">‚úÖ Admin-friendly</span>
            </div>
          </div>

          <div class="panel">
            <div class="inner">
              <div class="grid cols-3">
                <div class="card">
                  <b>Team Calendar + .ics</b>
                  <p>Publish races/trainings. Members add sessions to their calendar in one click.</p>
                </div>
                <div class="card">
                  <b>Roster & Roles</b>
                  <p>Core / Reserve / Trial / Academy ‚Äî assign roles and keep access clean.</p>
                </div>
                <div class="card">
                  <b>Results + KPIs</b>
                  <p>Track incidents, podiums, iR trends and consistent pace in a lightweight dashboard.</p>
                </div>
                <div class="card">
                  <b>Briefings & Notes</b>
                  <p>Centralize event notes, pit plans, setup versions, and debrief action items.</p>
                </div>
                <div class="card">
                  <b>Invite Members</b>
                  <p>Invite by email, generate links, control permissions (Admin / Manager / Member).</p>
                </div>
                <div class="card">
                  <b>Integrations</b>
                  <p>Discord announcements, webhooks, exports. Keep the loop tight.</p>
                </div>
              </div>

              <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;">
                <a class="btn primary" href="#pricing">See pricing ‚ûú</a>
                <button class="btn ghost" id="btnOpenLogin3">Admin Login ‚Üó</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="pricing">
        <div class="container">
          <div class="section-head">
            <div>
              <h2>Pricing</h2>
              <p>Simple tiers for teams of different sizes. Start small, upgrade when you need it.</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <span class="badge">üí≥ Stripe-ready</span>
              <span class="badge red">üß™ Demo UI</span>
            </div>
          </div>

          <div class="panel">
            <div class="inner">
              <div class="price-grid">
                <div class="price">
                  <div class="tier">Starter</div>
                  <div class="money">‚Ç¨9<span class="muted">/mo</span></div>
                  <div class="badge">Up to 10 members</div>
                  <ul>
                    <li>Calendar + .ics</li>
                    <li>Roster & roles</li>
                    <li>Basic results</li>
                  </ul>
                  <button class="btn primary" data-plan="starter">Start Starter</button>
                </div>

                <div class="price featured">
                  <div class="tag">Most popular</div>
                  <div class="tier">Pro</div>
                  <div class="money">‚Ç¨19<span class="muted">/mo</span></div>
                  <div class="badge good">Up to 30 members</div>
                  <ul>
                    <li>Everything in Starter</li>
                    <li>KPIs + exports</li>
                    <li>Discord integration</li>
                    <li>Admin permissions</li>
                  </ul>
                  <button class="btn primary" data-plan="pro">Start Pro</button>
                </div>

                <div class="price">
                  <div class="tier">Club</div>
                  <div class="money">‚Ç¨39<span class="muted">/mo</span></div>
                  <div class="badge">Unlimited members</div>
                  <ul>
                    <li>Everything in Pro</li>
                    <li>Multiple teams / squads</li>
                    <li>Advanced permissions</li>
                    <li>Priority support</li>
                  </ul>
                  <button class="btn primary" data-plan="club">Start Club</button>
                </div>
              </div>

              <p class="help" style="margin-top:12px;">
                These buttons currently open the login (demo). Replace with Stripe Checkout later.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="faq">
        <div class="container">
          <div class="section-head">
            <div>
              <h2>FAQ</h2>
              <p>Quick answers before you commit. You can keep it lightweight or wire it to a full backend.</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <span class="badge">üîê Auth</span>
              <span class="badge">üßæ Billing</span>
            </div>
          </div>

          <div class="grid cols-2">
            <div class="panel">
              <div class="inner">
                <div class="card">
                  <b>Do you provide real login/auth?</b>
                  <p>This template is UI-only. Plug it into your auth (JWT/session/cookies) in the JS stubs.</p>
                </div>
                <div class="card" style="margin-top:12px;">
                  <b>Is this only for iRacing?</b>
                  <p>It‚Äôs optimized for iRacing teams, but can be adapted for any sim racing group or league.</p>
                </div>
              </div>
            </div>

            <div class="panel">
              <div class="inner">
                <div class="card">
                  <b>Can it integrate with Discord?</b>
                  <p>Yes. Add a webhook field and publish sessions automatically to your channels.</p>
                </div>
                <div class="card" style="margin-top:12px;">
                  <b>Payments?</b>
                  <p>Stripe / Mollie ‚Äî straightforward. Replace the ‚ÄúStart plan‚Äù buttons with checkout sessions.</p>
                </div>
              </div>
            </div>
          </div>

          <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn primary" href="#contact">Talk to us ‚ûú</a>
            <button class="btn ghost" id="btnOpenLogin4">Admin Login ‚Üó</button>
          </div>
        </div>
      </section>

      <section id="contact">
        <div class="container">
          <div class="section-head">
            <div>
              <h2>Contact</h2>
              <p>Want this connected to your real data (iRacing exports/API, Discord, Sheets, billing)? Drop a message.</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <span class="badge">üì© Email</span>
              <span class="badge">üß© Integrations</span>
            </div>
          </div>

          <div class="panel">
            <div class="inner">
              <form id="contactForm">
                <div class="grid cols-2">
                  <div class="field">
                    <label for="cName">Name</label>
                    <input class="input" id="cName" type="text" placeholder="Your name" required />
                  </div>
                  <div class="field">
                    <label for="cEmail">Email</label>
                    <input class="input" id="cEmail" type="email" placeholder="you@email.com" required />
                  </div>
                </div>
                <div class="field" style="margin-top:12px;">
                  <label for="cMsg">Message</label>
                  <textarea id="cMsg" placeholder="Tell us what you want to build..." required></textarea>
                </div>
                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button class="btn primary" type="submit">Send ‚ûú</button>
                  <button class="btn ghost" type="reset">Clear</button>
                </div>
                <div class="help">Demo only: shows a toast. Hook to your backend/email provider.</div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <footer style="padding: 26px 16px 72px; border-top: 1px solid rgba(255,255,255,.08); background: rgba(0,0,0,.15);">
        <div class="container split">
          <div>
            <div style="font-weight:900;letter-spacing:.08em;text-transform:uppercase;">DOWNFORCE MAFIA</div>
            <div class="muted" style="font-size:12px;">Micro-SaaS for iRacing Teams</div>
            <div class="muted" style="font-size:12px;margin-top:10px;">¬© <span id="year"></span> ‚Ä¢ Landing + Admin UI</div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn tiny ghost" href="#pricing">Pricing</a>
            <a class="btn tiny" href="#features">Features</a>
            <button class="btn tiny primary" id="btnOpenLoginFooter">Admin Login</button>
          </div>
        </div>
      </footer>
    </div>

    <!-- ADMIN -->
    <div class="route" id="routeAdmin">
      <section class="admin-shell">
        <div class="container">
          <div class="admin-top">
            <div>
              <h1>Admin Dashboard</h1>
              <p>Manage your team workspace: events, members, briefings. (Demo data stored in localStorage.)</p>
              <div class="tabs" role="tablist" aria-label="Admin tabs">
                <button class="tab active" data-tab="overview">Overview</button>
                <button class="tab" data-tab="events">Events</button>
                <button class="tab" data-tab="members">Members</button>
                <button class="tab" data-tab="settings">Settings</button>
              </div>
            </div>

            <div class="panel" style="min-width:min(420px, 100%);">
              <div class="inner">
                <div class="split" style="align-items:flex-start;">
                  <div>
                    <div class="badge good">üîê Logged in</div>
                    <div style="margin-top:10px;">
                      <div class="muted" style="font-size:12px;">Org</div>
                      <div class="mono" id="adminOrg" style="font-weight:900;">‚Äî</div>
                    </div>
                    <div style="margin-top:10px;">
                      <div class="muted" style="font-size:12px;">Admin</div>
                      <div class="mono" id="adminEmail" style="font-weight:900;">‚Äî</div>
                    </div>
                  </div>
                  <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;">
                    <a class="btn tiny ghost" href="#home" id="btnBackHome">Back to landing</a>
                    <button class="btn tiny danger" id="btnLogout2">Logout</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- tab panels -->
          <div class="panel" id="tab_overview">
            <div class="inner">
              <div class="grid cols-3">
                <div class="card">
                  <b>Upcoming event</b>
                  <p id="ovNextEvent" class="mono">‚Äî</p>
                </div>
                <div class="card">
                  <b>Members</b>
                  <p id="ovMembers" class="mono">‚Äî</p>
                </div>
                <div class="card">
                  <b>Last briefing update</b>
                  <p id="ovBrief" class="mono">‚Äî</p>
                </div>
              </div>
              <div class="help" style="margin-top:10px;">Replace these with real metrics from your backend.</div>
            </div>
          </div>

          <div class="panel" id="tab_events" style="display:none;">
            <div class="inner">
              <div class="split">
                <div>
                  <b>Events</b>
                  <div class="help">Create trainings/races. Export .ics later.</div>
                </div>
                <button class="btn tiny primary" id="btnNewEvent">+ New event</button>
              </div>

              <div class="table-wrap" style="margin-top:12px;">
                <table>
                  <thead>
                    <tr>
                      <th>Date</th><th>Time</th><th>Type</th><th>Track</th><th>Car</th><th>Notes</th><th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="eventsTbody"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="panel" id="tab_members" style="display:none;">
            <div class="inner">
              <div class="split">
                <div>
                  <b>Members</b>
                  <div class="help">Invite members and set roles.</div>
                </div>
                <button class="btn tiny primary" id="btnInvite">+ Invite</button>
              </div>

              <div class="table-wrap" style="margin-top:12px;">
                <table>
                  <thead>
                    <tr>
                      <th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="membersTbody"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="panel" id="tab_settings" style="display:none;">
            <div class="inner">
              <b>Workspace Settings</b>
              <div class="grid cols-2" style="margin-top:12px;">
                <div class="field">
                  <label for="sOrg">Team/Org name</label>
                  <input class="input" id="sOrg" type="text" />
                </div>
                <div class="field">
                  <label for="sWebhook">Discord webhook (optional)</label>
                  <input class="input" id="sWebhook" type="url" placeholder="https://discord.com/api/webhooks/..." />
                </div>
              </div>

              <div class="field" style="margin-top:12px;">
                <label for="sBrand">Brand note</label>
                <textarea id="sBrand" placeholder="Short tagline or rules of the team..."></textarea>
              </div>

              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                <button class="btn primary" id="btnSaveSettings">Save settings ‚ûú</button>
                <button class="btn danger" id="btnResetData">Reset demo data</button>
              </div>

              <div class="help">Settings are stored in <span class="mono">localStorage</span> for demo.</div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // ---------------------------
    // Demo "Micro-SaaS" data layer
    // ---------------------------
    const KEYS = {
      session: "dfm_saas_session_v1",
      events: "dfm_saas_events_v1",
      members:"dfm_saas_members_v1",
      settings:"dfm_saas_settings_v1"
    };

    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));

    function toast(msg, sub="") {
      const t = $("#toast");
      t.innerHTML = `${msg}${sub ? `<small>${sub}</small>` : ""}`;
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"), 2600);
    }

    function loadJSON(key, fallback){
      try{ return JSON.parse(localStorage.getItem(key) || "null") ?? fallback; }
      catch{ return fallback; }
    }
    function saveJSON(key, value){
      localStorage.setItem(key, JSON.stringify(value));
    }

    function nowISO(){
      const d = new Date();
      const pad = n => String(n).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
    }

    function ensureDemoData(){
      const events = loadJSON(KEYS.events, null);
      const members = loadJSON(KEYS.members, null);
      const settings = loadJSON(KEYS.settings, null);

      if (!events){
        saveJSON(KEYS.events, [
          { id: crypto.randomUUID(), date: nowISO(), time:"21:00", type:"Training", track:"Spa", car:"GT3", notes:"Baseline + debrief" },
          { id: crypto.randomUUID(), date: "2026-02-16", time:"21:00", type:"Race", track:"Monza", car:"GT3", notes:"Pit window Lap 18‚Äì22" },
        ]);
      }
      if (!members){
        saveJSON(KEYS.members, [
          { id: crypto.randomUUID(), name:"Miguel", email:"miguel@team.com", role:"Core", status:"Active" },
          { id: crypto.randomUUID(), name:"Ana", email:"ana@team.com", role:"Core", status:"Active" },
          { id: crypto.randomUUID(), name:"Rui", email:"rui@team.com", role:"Reserve", status:"Invited" },
        ]);
      }
      if (!settings){
        saveJSON(KEYS.settings, {
          org: "Downforce Mafia",
          webhook: "",
          brand: "Clean racing. Real pace. No drama."
        });
      }
    }

    // ---------------------------
    // Fake auth (replace with real)
    // ---------------------------
    const auth = {
      getSession(){ return loadJSON(KEYS.session, null); },
      isAuthed(){ return !!auth.getSession(); },
      login({email, org}){
        // Replace with: POST /auth/login -> store token
        const session = { email, org: org || "Team", at: Date.now() };
        saveJSON(KEYS.session, session);
        return session;
      },
      logout(){
        localStorage.removeItem(KEYS.session);
      }
    };

    // ---------------------------
    // Routing (landing vs admin)
    // ---------------------------
    function setActiveNavByHash(){
      const hash = (location.hash || "#home").replace("#","");
      $$("#navLinks a[data-target]").forEach(a=>{
        a.classList.toggle("active", a.dataset.target === hash);
      });
    }

    function showRoute(route){
      $("#routeLanding").classList.toggle("active", route === "landing");
      $("#routeAdmin").classList.toggle("active", route === "admin");
    }

    function guardAdmin(){
      if (!auth.isAuthed()){
        // bounce to landing + open login
        showRoute("landing");
        location.hash = "#home";
        openLogin();
        toast("Admin access required", "Please login as a team administrator.");
        return false;
      }
      showRoute("admin");
      return true;
    }

    function routeFromHash(){
      const h = (location.hash || "#home").toLowerCase();
      setActiveNavByHash();

      if (h === "#admin"){
        if (!guardAdmin()) return;
        renderAdmin();
      } else {
        showRoute("landing");
      }
    }

    // ---------------------------
    // Login modal
    // ---------------------------
    function openLogin(){
      $("#loginModal").classList.add("open");
      $("#loginModal").setAttribute("aria-hidden","false");
      $("#loginEmail").focus();
    }
    function closeLogin(){
      $("#loginModal").classList.remove("open");
      $("#loginModal").setAttribute("aria-hidden","true");
    }

    // ---------------------------
    // Admin UI
    // ---------------------------
    function fmtNextEvent(events){
      const now = new Date();
      const items = [...events].map(e=>{
        const d = new Date(`${e.date}T${e.time}:00`);
        return { ...e, when: d };
      }).filter(x=>x.when > now).sort((a,b)=>a.when-b.when);
      if (!items.length) return "‚Äî";
      const x = items[0];
      return `${x.type} ‚Ä¢ ${x.track} (${x.car}) ‚Ä¢ ${x.date} ${x.time}`;
    }

    function renderAdminHeader(){
      const sess = auth.getSession();
      const settings = loadJSON(KEYS.settings, {});
      $("#adminEmail").textContent = sess?.email || "‚Äî";
      $("#adminOrg").textContent = settings.org || sess?.org || "‚Äî";
      $("#sOrg").value = settings.org || "";
      $("#sWebhook").value = settings.webhook || "";
      $("#sBrand").value = settings.brand || "";
    }

    function renderOverview(){
      const events = loadJSON(KEYS.events, []);
      const members = loadJSON(KEYS.members, []);
      const settings = loadJSON(KEYS.settings, {});

      $("#ovNextEvent").textContent = fmtNextEvent(events);
      $("#ovMembers").textContent = String(members.length);
      $("#ovBrief").textContent = (settings.brand || "‚Äî");
    }

    function renderEvents(){
      const tbody = $("#eventsTbody");
      const events = loadJSON(KEYS.events, []);
      if (!events.length){
        tbody.innerHTML = `<tr><td colspan="7"><span class="badge warn">No events yet</span></td></tr>`;
        return;
      }

      tbody.innerHTML = events.map(e=>`
        <tr>
          <td>${e.date}</td>
          <td class="mono">${e.time}</td>
          <td><span class="badge">${e.type}</span></td>
          <td>${e.track}</td>
          <td>${e.car}</td>
          <td class="muted">${e.notes || ""}</td>
          <td>
            <button class="btn tiny" data-edit-event="${e.id}">Edit</button>
            <button class="btn tiny danger" data-del-event="${e.id}">Delete</button>
          </td>
        </tr>
      `).join("");
    }

    function renderMembers(){
      const tbody = $("#membersTbody");
      const members = loadJSON(KEYS.members, []);
      if (!members.length){
        tbody.innerHTML = `<tr><td colspan="5"><span class="badge warn">No members yet</span></td></tr>`;
        return;
      }

      tbody.innerHTML = members.map(m=>`
        <tr>
          <td><b>${m.name}</b></td>
          <td class="mono">${m.email}</td>
          <td><span class="badge">${m.role}</span></td>
          <td>${m.status === "Active" ? `<span class="badge good">Active</span>` : `<span class="badge warn">${m.status}</span>`}</td>
          <td>
            <button class="btn tiny" data-edit-member="${m.id}">Edit</button>
            <button class="btn tiny danger" data-del-member="${m.id}">Remove</button>
          </td>
        </tr>
      `).join("");
    }

    function renderAdmin(){
      renderAdminHeader();
      renderOverview();
      renderEvents();
      renderMembers();

      // show admin nav items
      $("#navAdmin").style.display = "inline-flex";
      $("#drawerAdmin").style.display = "block";
    }

    function setAuthedUI(){
      const authed = auth.isAuthed();
      $("#btnLogout").style.display = authed ? "inline-flex" : "none";
      $("#btnLogin").style.display = authed ? "none" : "inline-flex";
      $("#drawerLogout").style.display = authed ? "inline-flex" : "none";
      $("#drawerLogin").style.display = authed ? "none" : "inline-flex";
      $("#navAdmin").style.display = authed ? "inline-flex" : "none";
      $("#drawerAdmin").style.display = authed ? "block" : "none";
    }

    // ---------------------------
    // Tabs
    // ---------------------------
    function setTab(name){
      $$(".tab").forEach(t=>t.classList.toggle("active", t.dataset.tab === name));
      $("#tab_overview").style.display = (name==="overview") ? "block" : "none";
      $("#tab_events").style.display = (name==="events") ? "block" : "none";
      $("#tab_members").style.display = (name==="members") ? "block" : "none";
      $("#tab_settings").style.display = (name==="settings") ? "block" : "none";
    }

    // ---------------------------
    // Drawer
    // ---------------------------
    function openDrawer(){ $("#drawer").classList.add("open"); $("#drawer").setAttribute("aria-hidden","false"); }
    function closeDrawer(){ $("#drawer").classList.remove("open"); $("#drawer").setAttribute("aria-hidden","true"); }

    // ---------------------------
    // CRUD modals (simple prompt-based demo)
    // ---------------------------
    function newEvent(){
      const date = prompt("Event date (YYYY-MM-DD):", nowISO());
      if (!date) return;
      const time = prompt("Time (HH:MM):", "21:00") || "21:00";
      const type = prompt("Type (Training/Race):", "Training") || "Training";
      const track = prompt("Track:", "Spa") || "Spa";
      const car = prompt("Car:", "GT3") || "GT3";
      const notes = prompt("Notes:", "Baseline + debrief") || "";
      const events = loadJSON(KEYS.events, []);
      events.push({ id: crypto.randomUUID(), date, time, type, track, car, notes });
      saveJSON(KEYS.events, events);
      renderEvents(); renderOverview();
      toast("Event created", `${type} ‚Ä¢ ${date} ${time}`);
    }

    function editEvent(id){
      const events = loadJSON(KEYS.events, []);
      const e = events.find(x=>x.id===id);
      if (!e) return;
      e.date = prompt("Date (YYYY-MM-DD):", e.date) || e.date;
      e.time = prompt("Time (HH:MM):", e.time) || e.time;
      e.type = prompt("Type:", e.type) || e.type;
      e.track = prompt("Track:", e.track) || e.track;
      e.car = prompt("Car:", e.car) || e.car;
      e.notes = prompt("Notes:", e.notes || "") ?? e.notes;
      saveJSON(KEYS.events, events);
      renderEvents(); renderOverview();
      toast("Event updated", `${e.type} ‚Ä¢ ${e.date} ${e.time}`);
    }

    function delEvent(id){
      const events = loadJSON(KEYS.events, []);
      const idx = events.findIndex(x=>x.id===id);
      if (idx<0) return;
      if (!confirm("Delete this event?")) return;
      const removed = events.splice(idx,1)[0];
      saveJSON(KEYS.events, events);
      renderEvents(); renderOverview();
      toast("Event deleted", `${removed.type} ‚Ä¢ ${removed.date} ${removed.time}`);
    }

    function inviteMember(){
      const name = prompt("Member name:", "New Driver");
      if (!name) return;
      const email = prompt("Email:", "driver@team.com");
      if (!email) return;
      const role = prompt("Role (Core/Reserve/Trial/Academy):", "Trial") || "Trial";
      const members = loadJSON(KEYS.members, []);
      members.push({ id: crypto.randomUUID(), name, email, role, status:"Invited" });
      saveJSON(KEYS.members, members);
      renderMembers(); renderOverview();
      toast("Invite created", `${name} ‚Ä¢ ${role}`);
    }

    function editMember(id){
      const members = loadJSON(KEYS.members, []);
      const m = members.find(x=>x.id===id);
      if (!m) return;
      m.name = prompt("Name:", m.name) || m.name;
      m.email = prompt("Email:", m.email) || m.email;
      m.role = prompt("Role:", m.role) || m.role;
      m.status = prompt("Status (Active/Invited):", m.status) || m.status;
      saveJSON(KEYS.members, members);
      renderMembers(); renderOverview();
      toast("Member updated", `${m.name} ‚Ä¢ ${m.role}`);
    }

    function delMember(id){
      const members = loadJSON(KEYS.members, []);
      const idx = members.findIndex(x=>x.id===id);
      if (idx<0) return;
      if (!confirm("Remove this member?")) return;
      const removed = members.splice(idx,1)[0];
      saveJSON(KEYS.members, members);
      renderMembers(); renderOverview();
      toast("Member removed", removed.name);
    }

    function saveSettings(){
      const settings = loadJSON(KEYS.settings, {});
      settings.org = $("#sOrg").value.trim() || settings.org || "Team";
      settings.webhook = $("#sWebhook").value.trim();
      settings.brand = $("#sBrand").value.trim();
      saveJSON(KEYS.settings, settings);
      renderAdminHeader();
      renderOverview();
      toast("Settings saved", settings.org);
    }

    function resetDemoData(){
      if (!confirm("Reset demo data (events/members/settings)?")) return;
      localStorage.removeItem(KEYS.events);
      localStorage.removeItem(KEYS.members);
      localStorage.removeItem(KEYS.settings);
      ensureDemoData();
      renderAdmin();
      toast("Demo data reset");
    }

    // ---------------------------
    // INIT
    // ---------------------------
    function init(){
      $("#year").textContent = new Date().getFullYear();
      ensureDemoData();
      setAuthedUI();

      // hash route
      setActiveNavByHash();
      window.addEventListener("hashchange", routeFromHash);

      // nav
      $("#btnLogin").addEventListener("click", openLogin);
      $("#btnLogin2").addEventListener("click", openLogin);
      $("#btnOpenLogin").addEventListener("click", openLogin);
      $("#btnOpenLogin3").addEventListener("click", openLogin);
      $("#btnOpenLogin4").addEventListener("click", openLogin);
      $("#btnOpenLoginFooter").addEventListener("click", openLogin);

      $("#btnLogout").addEventListener("click", ()=>{ auth.logout(); setAuthedUI(); toast("Logged out"); if (location.hash==="#admin") location.hash="#home"; });
      $("#btnLogout2").addEventListener("click", ()=>{ auth.logout(); setAuthedUI(); toast("Logged out"); location.hash="#home"; });
      $("#btnBackHome").addEventListener("click", ()=>{ /* just link */ });

      // drawer
      $("#openDrawer").addEventListener("click", openDrawer);
      $("#closeDrawer").addEventListener("click", closeDrawer);
      $("#drawer").addEventListener("click", (e)=>{ if (e.target.id==="drawer") closeDrawer(); });
      $("#drawerLinks").addEventListener("click", (e)=>{
        const a = e.target.closest("a");
        if (a) closeDrawer();
      });
      $("#drawerLogin").addEventListener("click", ()=>{ closeDrawer(); openLogin(); });
      $("#drawerLogout").addEventListener("click", ()=>{ closeDrawer(); auth.logout(); setAuthedUI(); toast("Logged out"); if (location.hash==="#admin") location.hash="#home"; });

      // login modal
      $("#btnOpenLogin").addEventListener("click", openLogin);
      $("#closeLogin").addEventListener("click", closeLogin);
      $("#loginModal").addEventListener("click", (e)=>{ if (e.target.id==="loginModal") closeLogin(); });
      document.addEventListener("keydown", (e)=>{ if (e.key==="Escape") { closeLogin(); closeDrawer(); } });

      $("#demoFill").addEventListener("click", ()=>{
        $("#loginEmail").value = "admin@downforcemafia.gg";
        $("#loginOrg").value = "Downforce Mafia";
        $("#loginPass").value = "demo-password";
        toast("Demo credentials filled");
      });

      $("#doLogin").addEventListener("click", ()=>{
        const email = $("#loginEmail").value.trim();
        const org = $("#loginOrg").value.trim();
        const pass = $("#loginPass").value.trim();
        if (!email || !pass){
          toast("Missing fields", "Email and password are required.");
          return;
        }
        auth.login({ email, org });
        setAuthedUI();
        closeLogin();
        toast("Logged in", email);
        location.hash = "#admin";
        routeFromHash();
      });

      // pricing buttons open login (demo)
      document.addEventListener("click", (e)=>{
        const btn = e.target.closest("button[data-plan]");
        if (!btn) return;
        openLogin();
        toast("Select plan (demo)", `Plan: ${btn.dataset.plan}`);
      });

      // contact form demo
      $("#contactForm").addEventListener("submit", (e)=>{
        e.preventDefault();
        toast("Message sent (demo)", "Hook this to your backend/email provider.");
        e.target.reset();
      });

      // tabs
      $$(".tab").forEach(t=>{
        t.addEventListener("click", ()=>{
          setTab(t.dataset.tab);
        });
      });

      // admin actions
      $("#btnNewEvent").addEventListener("click", ()=>{ if (guardAdmin()) newEvent(); });
      $("#btnInvite").addEventListener("click", ()=>{ if (guardAdmin()) inviteMember(); });
      $("#btnSaveSettings").addEventListener("click", ()=>{ if (guardAdmin()) saveSettings(); });
      $("#btnResetData").addEventListener("click", ()=>{ if (guardAdmin()) resetDemoData(); });

      // table delegates
      $("#eventsTbody").addEventListener("click", (e)=>{
        const edit = e.target.closest("button[data-edit-event]");
        const del = e.target.closest("button[data-del-event]");
        if (edit) return editEvent(edit.dataset.editEvent);
        if (del) return delEvent(del.dataset.delEvent);
      });
      $("#membersTbody").addEventListener("click", (e)=>{
        const edit = e.target.closest("button[data-edit-member]");
        const del = e.target.closest("button[data-del-member]");
        if (edit) return editMember(edit.dataset.editMember);
        if (del) return delMember(del.dataset.delMember);
      });

      // initial route
      routeFromHash();
    }

    init();
  </script>
</body>
</html>